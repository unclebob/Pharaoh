#include <std.h>#include <quickdraw.h>#include <dialog.h>#include <event.h>#include <control.h>#include "vars.h"#include "pharaoh.h"#include "strings.h"/*«DoPyramid»  * DoPyramid -- Tell the system how many pyramid stones to lay this month  */  VOID DoPyramid()	{	DialogRecord d;	BITS item;	Rect r;		GetNewDialog(D_PYQUOTA, &d, -1L);	FOREVER		{		ModalDialog(NIL, &item);				if (item == DI_CANCEL)			break;		else if (item == DI_OK)			{			TEXT num[256]; /* dialog edits can't return anything bigger */			BITS x;			Handle editHandle;			DOUBLE atof(), newPyQuota;						GetDItem(&d, DIPY_EDIT, &x, &editHandle, &r);			GetIText(editHandle, &num);			ptoc(&num);						if (!IsNumeric(&num))				{				ErrorStr(ST_QUIN);				continue;				}							newPyQuota = atof(&num);						/* do some error checking */			if (newPyQuota < 0)				{				ErrorStr(ST_QUNN);				SelIText(&d, DIPY_EDIT, 0, 32767);				continue;				}						pyQuota = newPyQuota;			break;			}		}	CloseDialog(&d);	}