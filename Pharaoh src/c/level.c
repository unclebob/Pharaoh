/*  * level.c -- This module controls the difficulty level of the game  */  #include <std.h>#include <quickdraw.h>#include <dialog.h>#include <event.h>#include <control.h>#include "vars.h"#include "pharaoh.h"#include "random.h"#include "strings.h"/* local variables */BOOL hardFlag=NO, normalFlag=NO, easyFlag=NO;ControlHandle hardRb, normalRb, easyRb;/*ÇDoLevelÈ  * DoLevel -- control the level dialog box  */  VOID DoLevel()	{	IMPORT BOOL dunnCancel;	DialogRecord d;	BITS item;	Rect r;		hardFlag = normalFlag = easyFlag = NO;	GetNewDialog(D_LEVEL, &d, -1L);		GetDItem(&d, DILV_HARD, &item, &hardRb, &r);	GetDItem(&d, DILV_EASY, &item, &easyRb, &r);	GetDItem(&d, DILV_NORM,&item, &normalRb, &r);		FOREVER		{		pascal short LVFilter();				ModalDialog(&LVFilter, &item);				if (item == DI_CANCEL)			break;		else if (item==DILV_EASY || item==DILV_HARD || item==DILV_NORM)			{			SetCtlValue(hardRb, hardFlag = (item==DILV_HARD));			SetCtlValue(easyRb, easyFlag = (item==DILV_EASY));			SetCtlValue(normalRb, normalFlag = (item==DILV_NORM));			}		else if (item == DI_OK)			{			if (!(hardFlag || normalFlag || easyFlag))				easyFlag = YES;						if (hardFlag)				{				/* default parameters are already hard enough */				pyBase = 1154.7; 	/* 1000 ft pyramid */				}							if (easyFlag)				{				creditLimit = creditLower = 5e6;				worldGrowth = .15;				lnPrice = 1000;				wtPrice = 10;				slPrice = 1000;				pyBase = 115.47;	/* 100 ft pyramid */				}			if (normalFlag)				{				creditLimit = creditLower = 5e5;				worldGrowth = .1;				lnPrice = 5000;				wtPrice = 8;				slPrice = 800;				pyBase = 346.41; /* 300 ft pyramid */				}			break;			}		}			CloseDialog(&d);	}		/*ÇLVFilterÈ  * LVFilter  -- 	the filter proc for the Level dialog.  Checks the flags to see if a function  * 				has been selected.  If not, the e or h or n keys will select one.  */  pascal short LVFilter(d, e, item)DialogPtr d;EventRecord *e;BITS *item;	{	if (e->what == keyDown && ((TEXT)e->message) == '\r')		{		*item = DI_OK;		return(pTRUE);		}	if (easyFlag || hardFlag || normalFlag)		return(pFALSE);	if (e->what == keyDown)		{		TEXT c;		c = e->message;		c = tolower(c);		if (c == 'e')			{			*item = DILV_EASY;			return(pTRUE);			}		else if (c == 'h')			{			*item = DILV_HARD;			return(pTRUE);			}		else if  (c == 'n')			{			*item = DILV_NORM;			return(pTRUE);			}		else return(pFALSE);		}	return(pFALSE);	}